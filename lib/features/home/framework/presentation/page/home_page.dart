import 'package:flutter/material.dart';import 'package:flutter_riverpod/flutter_riverpod.dart';import 'package:google_mobile_ads/google_mobile_ads.dart';import 'package:whatsappsendnumber/features/home/framework/di/home_di.dart';import 'package:whatsappsendnumber/features/home/framework/presentation/page/history_page.dart';import 'package:whatsappsendnumber/features/home/framework/presentation/page/send_message_page.dart';import 'package:whatsappsendnumber/features/home/framework/presentation/ui_models/home_state.dart';import 'package:whatsappsendnumber/resources/extensions/extension_context.dart';import 'package:whatsappsendnumber/resources/utils/admon/AdHelper.dart';class HomePage extends ConsumerStatefulWidget {  const HomePage({Key? key}) : super(key: key);  @override  ConsumerState<ConsumerStatefulWidget> createState() => _HomePageState();}class _HomePageState extends ConsumerState<HomePage> {  final phoneNumberController = TextEditingController();  BannerAd? _bannerAd = null;  @override  void initState() {    super.initState();    BannerAd(      adUnitId: AdHelper.bannerAdUnitId,      request: const AdRequest(),      size: AdSize.banner,      listener: BannerAdListener(        onAdLoaded: (ad) {          setState(() {            _bannerAd = ad as BannerAd;          });        },        onAdFailedToLoad: (ad, err) {          ad.dispose();        },      ),    ).load();  }  @override  Widget build(BuildContext context) {    final notifier = ref.watch(homeProvider);    return Scaffold(        appBar: AppBar(          automaticallyImplyLeading: false,          title: Text(            context.strings().appTitle,          ),        ),        bottomNavigationBar: BottomNavigationBar(          type: BottomNavigationBarType.fixed,          currentIndex: notifier.currentTab,          onTap: (index) {            ref.read(homeProvider.notifier).changePage(index);            ref.read(homeProvider.notifier).onEvent(index);          },          items: [            BottomNavigationBarItem(              label: context.strings().tabSendMessage,              icon: const Icon(Icons.send),            ),            BottomNavigationBarItem(              label: context.strings().tabList,              icon: const Icon(Icons.list),            ),          ],        ),        body: Stack(          children: [            StreamBuilder(                stream: ref.watch(homeProvider.notifier).stream,                builder: (context, snapshot) {                  final home = snapshot.hasData ? (snapshot.data as HomeState) : const HomeState();                  debugPrint("INDEX -> $home.currentTab");                  switch (home.currentTab) {                    case 0:                      return SendMessagePage();                    case 1:                      return const HistoryPage();                    default:                      return Container(color: Colors.white);                  }                }),            Visibility(              visible: _bannerAd != null,              child: Align(                alignment: Alignment.bottomCenter,                child: SizedBox(                  width: MediaQuery.of(context).size.width,                  height: _bannerAd?.size.height.toDouble(),                  child: _bannerAd != null ? AdWidget(ad: _bannerAd!) : Container(),                ),              ),            )          ],        ));  }  @override  void dispose() {    _bannerAd?.dispose();    super.dispose();  }}