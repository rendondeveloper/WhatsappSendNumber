import 'package:flutter_riverpod/flutter_riverpod.dart';import 'package:whatsappsendnumber/core/analitycs/analytics_constants.dart';import 'package:whatsappsendnumber/core/analitycs/analytics_sender_events.dart';import 'package:whatsappsendnumber/core/db/features/get_url_launch_chat/get_url_lauch_chat_use_cases.dart';import 'package:whatsappsendnumber/core/db/features/number_phone_data_base/usescase/delete_item_phone_number_uses_case.dart';import 'package:whatsappsendnumber/core/db/features/number_phone_data_base/usescase/get_phone_number_uses_case.dart';import 'package:whatsappsendnumber/features/home/framework/presentation/provider/mapper/map_phone_number_local_to_phone_number_state.dart';import 'package:whatsappsendnumber/features/home/framework/presentation/ui_models/history_state.dart';class HistoryProvider extends StateNotifier<HistoryState> {  final GetUrlLauncherChatUseCases _getUrlLauncherChatUseCases;  final GetPhoneNumberUsesCases _getPhoneNumberUsesCases;  final DeleteItemPhoneNumberUsesCases _deleteItemPhoneNumberUsesCases;  final MapPhoneNumberLocalToPhoneNumberState _mapPhoneNumberLocalToPhoneNumberState;  final AnalyticsSenderEvents _analyticsSenderEvents;  HistoryProvider(      this._getPhoneNumberUsesCases, this._deleteItemPhoneNumberUsesCases, this._mapPhoneNumberLocalToPhoneNumberState, this._analyticsSenderEvents, this._getUrlLauncherChatUseCases)      : super(const HistoryState()) {    getPhoneNumbers();    _sendScreen();  }  Future<void> launchChat(String phone, String message) async {    final urlLaunch = _getUrlLauncherChatUseCases.invoke(phone, message);    state = state.copyWith(numberToLaunch: urlLaunch);    state = state.copyWith(numberToLaunch: "");  }  Future<void> getPhoneNumbers() async {    final phoneNumberOutput = await _getPhoneNumberUsesCases.invoke();    state = state.copyWith(numberPhones: phoneNumberOutput.phoneNumbers.map((e) => _mapPhoneNumberLocalToPhoneNumberState.map(e)).toList());  }  Future<void> deleteNumber(int number) async {    await _deleteItemPhoneNumberUsesCases.invoke(number);    getPhoneNumbers();  }  void onEvent(String event) {    _analyticsSenderEvents.onEvent(AnalyticsConstants.pageTabHistoryEvent, parameters: {AnalyticsConstants.pageTabHistoryEventItem: event});  }  void _sendScreen() {    _analyticsSenderEvents.sendScreen(AnalyticsConstants.pageTabHistory);  }}